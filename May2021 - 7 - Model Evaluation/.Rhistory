knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
gt_dec2020_csv <- read_csv('data/May2021_5 GroundTruth.csv')
gt_dec2020_csv <- read_csv('data/May2021_5 GroundTruth.csv')
me_dec2020_csv <- read_csv('data/May2021_5_model_evaluation.csv')
gt_dec2020 <- gt_dec2020_csv
me_dec2020 <- me_dec2020_csv %>%
filter(iteration >= 800) %>%     # earlier models are not even close
filter(confthreshold != 100) %>% # some metrics seem to be broken at that conf level
left_join( gt_dec2020 %>% filter(set=='testing'), by='class' ) %>%
mutate(fn=totalcount-tp) %>%
mutate(
precision = tp / (tp+fp),
recall = tp / (tp+fn)
) %>%
mutate(
f1score = 2*( (precision*recall) / (precision+recall) )
)
write_csv(me_dec2020, "modeleval_May_2021_05.csv")
me_dec2020.long <- me_dec2020 %>%
